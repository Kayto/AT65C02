10 REM LCD POSITION TEST
20 PRINT "LCD POSITION TEST"
30 MC = 30000
40 REM LOAD LCD CLEAR CODE
50 FOR I = 0 TO 41
60 READ B
70 POKE MC + I, B
80 NEXT I
90 REM LOAD LCD PUTC CODE
100 FOR I = 0 TO 53
110 READ B
120 POKE MC + 42 + I, B
130 NEXT I
135 REM LOAD LCD CMD CODE
137 FOR I = 0 TO 49
138 READ B
139 POKE MC + 96 + I, B
140 NEXT I
145 REM CLEAR LCD
150 GOSUB 1000
160 PRINT "WRITE 0-9"
170 FOR I = 0 TO 9
180 POKE 101, 48 + I
190 GOSUB 1100
200 NEXT I
210 PRINT "WAIT..."
220 FOR D = 1 TO 1000: NEXT D
230 PRINT "POS 0 = A"
240 POKE 101, 128
250 GOSUB 1200
255 PRINT "CMD RETURNED"
260 POKE 101, 65
270 GOSUB 1100
275 PRINT "PUTC RETURNED"
280 PRINT "POS 5 = B"
290 POKE 101, 133
300 GOSUB 1200
310 POKE 101, 66
320 GOSUB 1100
330 PRINT "DONE"
340 END
1000 REM LCD CLEAR
1010 POKE 10, 76
1020 POKE 11, MC AND 255
1030 POKE 12, MC / 256
1040 X = USR(0)
1050 RETURN
1100 REM LCD PUTC
1110 AD = MC + 42
1120 POKE 10, 76
1130 POKE 11, AD AND 255
1140 POKE 12, AD / 256
1150 X = USR(0)
1160 RETURN
1200 REM LCD CMD
1210 AD = MC + 96
1220 POKE 10, 76
1230 POKE 11, AD AND 255
1240 POKE 12, AD / 256
1250 X = USR(0)
1260 RETURN
2000 REM LCD CLEAR DATA
2010 REM HIGH NIBBLE 0 RS=0
2020 DATA 169,0,141,0,144
2030 REM E HIGH
2040 DATA 169,8,141,0,144
2050 REM SHORT DELAY
2060 DATA 234,234,234
2070 REM E LOW
2080 DATA 169,0,141,0,144
2090 REM LOW NIBBLE 1 RS=0
2100 DATA 169,16,141,0,144
2110 REM E HIGH
2120 DATA 169,24,141,0,144
2130 REM SHORT DELAY
2140 DATA 234,234,234
2150 REM E LOW
2160 DATA 169,16,141,0,144
2170 REM SHORT DELAY
2180 DATA 162,50,202,208,253
2190 DATA 96
3000 REM LCD PUTC DATA
3010 REM LOAD CHAR SAVE
3020 DATA 165,101,72
3030 REM HIGH NIBBLE KEEP 7-4
3040 DATA 41,240,9,2
3050 DATA 141,0,144
3060 REM E HIGH
3070 DATA 9,8,141,0,144
3080 REM DELAY
3090 DATA 234,234,234
3100 REM E LOW XOR
3110 DATA 73,8,141,0,144
3120 REM LOW NIBBLE RESTORE
3130 DATA 104,41,15,10
3140 DATA 10,10,10,9
3150 DATA 2,141,0,144
3160 REM E HIGH
3170 DATA 9,8,141,0,144
3180 REM DELAY
3190 DATA 234,234,234
3200 REM E LOW XOR
3210 DATA 73,8,141,0,144
3220 REM SHORT DELAY
3230 DATA 162,10,202,208,253
3240 DATA 96
4000 REM LCD CMD DATA
4010 REM LOAD CMD SAVE
4020 DATA 165,101,72
4030 REM HIGH NIBBLE KEEP 7-4
4040 DATA 41,240,141,0,144
4050 REM E HIGH
4060 DATA 9,8,141,0,144
4070 REM DELAY
4080 DATA 234,234,234
4090 REM E LOW AND
4100 DATA 41,247,141,0,144
4110 REM LOW NIBBLE RESTORE
4120 DATA 104,41,15,10
4130 DATA 10,10,10,141
4140 DATA 0,144
4150 REM E HIGH
4160 DATA 9,8,141,0,144
4170 REM DELAY
4180 DATA 234,234,234
4190 REM E LOW AND
4200 DATA 41,247,141,0,144
4210 REM LONGER DELAY FOR COMMANDS
4220 DATA 162,50,202,208,253
4230 DATA 96
